{"version":3,"file":"e-commerce.min.js","sources":["../../../apps/erpnext/erpnext/e_commerce/product_ui/views.js","../../../apps/erpnext/erpnext/e_commerce/product_ui/grid.js","../../../apps/erpnext/erpnext/e_commerce/product_ui/list.js","../../../apps/erpnext/erpnext/e_commerce/product_ui/search.js"],"sourcesContent":["erpnext.ProductView =  class {\n\t/* Options:\n\t\t- View Type\n\t\t- Products Section Wrapper,\n\t\t- Item Group: If its an Item Group page\n\t*/\n\tconstructor(options) {\n\t\tObject.assign(this, options);\n\t\tthis.preference = this.view_type;\n\t\tthis.make();\n\t}\n\n\tmake(from_filters=false) {\n\t\tthis.products_section.empty();\n\t\tthis.prepare_toolbar();\n\t\tthis.get_item_filter_data(from_filters);\n\t}\n\n\tprepare_toolbar() {\n\t\tthis.products_section.append(`\n\t\t\t<div class=\"toolbar d-flex\">\n\t\t\t</div>\n\t\t`);\n\t\tthis.prepare_search();\n\t\tthis.prepare_view_toggler();\n\n\t\tfrappe.require('/assets/js/e-commerce.min.js', function() {\n\t\t\tnew erpnext.ProductSearch();\n\t\t});\n\t}\n\n\tprepare_view_toggler() {\n\n\t\tif (!$(\"#list\").length || !$(\"#image-view\").length) {\n\t\t\tthis.render_view_toggler();\n\t\t\tthis.bind_view_toggler_actions();\n\t\t\tthis.set_view_state();\n\t\t}\n\t}\n\n\tget_item_filter_data(from_filters=false) {\n\t\t// Get and render all Product related views\n\t\tlet me = this;\n\t\tthis.from_filters = from_filters;\n\t\tlet args = this.get_query_filters();\n\n\t\tthis.disable_view_toggler(true);\n\n\t\tfrappe.call({\n\t\t\tmethod: \"erpnext.e_commerce.api.get_product_filter_data\",\n\t\t\targs: {\n\t\t\t\tquery_args: args\n\t\t\t},\n\t\t\tcallback: function(result) {\n\t\t\t\tif (!result || result.exc || !result.message || result.message.exc) {\n\t\t\t\t\tme.render_no_products_section(true);\n\t\t\t\t} else {\n\t\t\t\t\t// Sub Category results are independent of Items\n\t\t\t\t\tif (me.item_group && result.message[\"sub_categories\"].length) {\n\t\t\t\t\t\tme.render_item_sub_categories(result.message[\"sub_categories\"]);\n\t\t\t\t\t}\n\n\t\t\t\t\tif (!result.message[\"items\"].length) {\n\t\t\t\t\t\t// if result has no items or result is empty\n\t\t\t\t\t\tme.render_no_products_section();\n\t\t\t\t\t} else {\n\t\t\t\t\t\t// Add discount filters\n\t\t\t\t\t\tme.re_render_discount_filters(result.message[\"filters\"].discount_filters);\n\n\t\t\t\t\t\t// Render views\n\t\t\t\t\t\tme.render_list_view(result.message[\"items\"], result.message[\"settings\"]);\n\t\t\t\t\t\tme.render_grid_view(result.message[\"items\"], result.message[\"settings\"]);\n\n\t\t\t\t\t\tme.products = result.message[\"items\"];\n\t\t\t\t\t\tme.product_count = result.message[\"items_count\"];\n\t\t\t\t\t}\n\n\t\t\t\t\t// Bind filter actions\n\t\t\t\t\tif (!from_filters) {\n\t\t\t\t\t\t// If `get_product_filter_data` was triggered after checking a filter,\n\t\t\t\t\t\t// don't touch filters unnecessarily, only data must change\n\t\t\t\t\t\t// filter persistence is handle on filter change event\n\t\t\t\t\t\tme.bind_filters();\n\t\t\t\t\t\tme.restore_filters_state();\n\t\t\t\t\t}\n\n\t\t\t\t\t// Bottom paging\n\t\t\t\t\tme.add_paging_section(result.message[\"settings\"]);\n\t\t\t\t}\n\n\t\t\t\tme.disable_view_toggler(false);\n\t\t\t}\n\t\t});\n\t}\n\n\tdisable_view_toggler(disable=false) {\n\t\t$('#list').prop('disabled', disable);\n\t\t$('#image-view').prop('disabled', disable);\n\t}\n\n\trender_grid_view(items, settings) {\n\t\t// loop over data and add grid html to it\n\t\tlet me = this;\n\t\tthis.prepare_product_area_wrapper(\"grid\");\n\n\t\tfrappe.require('/assets/js/e-commerce.min.js', function() {\n\t\t\tnew erpnext.ProductGrid({\n\t\t\t\titems: items,\n\t\t\t\tproducts_section: $(\"#products-grid-area\"),\n\t\t\t\tsettings: settings,\n\t\t\t\tpreference: me.preference\n\t\t\t});\n\t\t});\n\t}\n\n\trender_list_view(items, settings) {\n\t\tlet me = this;\n\t\tthis.prepare_product_area_wrapper(\"list\");\n\n\t\tfrappe.require('/assets/js/e-commerce.min.js', function() {\n\t\t\tnew erpnext.ProductList({\n\t\t\t\titems: items,\n\t\t\t\tproducts_section: $(\"#products-list-area\"),\n\t\t\t\tsettings: settings,\n\t\t\t\tpreference: me.preference\n\t\t\t});\n\t\t});\n\t}\n\n\tprepare_product_area_wrapper(view) {\n\t\tlet left_margin = view == \"list\" ? \"ml-2\" : \"\";\n\t\tlet top_margin = view == \"list\" ? \"mt-6\" : \"mt-minus-1\";\n\t\treturn this.products_section.append(`\n\t\t\t<br>\n\t\t\t<div id=\"products-${view}-area\" class=\"row products-list ${ top_margin } ${ left_margin }\"></div>\n\t\t`);\n\t}\n\n\tget_query_filters() {\n\t\tconst filters = frappe.utils.get_query_params();\n\t\tlet {field_filters, attribute_filters} = filters;\n\n\t\tfield_filters = field_filters ? JSON.parse(field_filters) : {};\n\t\tattribute_filters = attribute_filters ? JSON.parse(attribute_filters) : {};\n\n\t\treturn {\n\t\t\tfield_filters: field_filters,\n\t\t\tattribute_filters: attribute_filters,\n\t\t\titem_group: this.item_group,\n\t\t\tstart: filters.start || null,\n\t\t\tfrom_filters: this.from_filters || false\n\t\t};\n\t}\n\n\tadd_paging_section(settings) {\n\t\t$(\".product-paging-area\").remove();\n\n\t\tif (this.products) {\n\t\t\tlet paging_html = `\n\t\t\t\t<div class=\"row product-paging-area mt-5\">\n\t\t\t\t\t<div class=\"col-3\">\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"col-9 text-right\">\n\t\t\t`;\n\t\t\tlet query_params = frappe.utils.get_query_params();\n\t\t\tlet start = query_params.start ? cint(JSON.parse(query_params.start)) : 0;\n\t\t\tlet page_length = settings.products_per_page || 0;\n\n\t\t\tlet prev_disable = start > 0 ? \"\" : \"disabled\";\n\t\t\tlet next_disable = (this.product_count > page_length) ? \"\" : \"disabled\";\n\n\t\t\tpaging_html += `\n\t\t\t\t<button class=\"btn btn-default btn-prev\" data-start=\"${ start - page_length }\"\n\t\t\t\t\tstyle=\"float: left\" ${prev_disable}>\n\t\t\t\t\t${ __(\"Prev\") }\n\t\t\t\t</button>`;\n\n\t\t\tpaging_html += `\n\t\t\t\t<button class=\"btn btn-default btn-next\" data-start=\"${ start + page_length }\"\n\t\t\t\t\t${next_disable}>\n\t\t\t\t\t${ __(\"Next\") }\n\t\t\t\t</button>\n\t\t\t`;\n\n\t\t\tpaging_html += `</div></div>`;\n\n\t\t\t$(\".page_content\").append(paging_html);\n\t\t\tthis.bind_paging_action();\n\t\t}\n\t}\n\n\tprepare_search() {\n\t\t$(\".toolbar\").append(`\n\t\t\t<div class=\"input-group col-8 p-0\">\n\t\t\t\t<div class=\"dropdown w-100\" id=\"dropdownMenuSearch\">\n\t\t\t\t\t<input type=\"search\" name=\"query\" id=\"search-box\" class=\"form-control font-md\"\n\t\t\t\t\t\tplaceholder=\"Search for Products\"\n\t\t\t\t\t\taria-label=\"Product\" aria-describedby=\"button-addon2\">\n\t\t\t\t\t<div class=\"search-icon\">\n\t\t\t\t\t\t<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" viewBox=\"0 0 24 24\"\n\t\t\t\t\t\t\tfill=\"none\"\n\t\t\t\t\t\t\tstroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\"\n\t\t\t\t\t\t\tstroke-linejoin=\"round\"\n\t\t\t\t\t\t\tclass=\"feather feather-search\">\n\t\t\t\t\t\t\t<circle cx=\"11\" cy=\"11\" r=\"8\"></circle>\n\t\t\t\t\t\t\t<line x1=\"21\" y1=\"21\" x2=\"16.65\" y2=\"16.65\"></line>\n\t\t\t\t\t\t</svg>\n\t\t\t\t\t</div>\n\t\t\t\t\t<!-- Results dropdown rendered in product_search.js -->\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t`);\n\t}\n\n\trender_view_toggler() {\n\t\t$(\".toolbar\").append(`<div class=\"toggle-container col-4 p-0\"></div>`);\n\n\t\t[\"btn-list-view\", \"btn-grid-view\"].forEach(view => {\n\t\t\tlet icon = view === \"btn-list-view\" ? \"list\" : \"image-view\";\n\t\t\t$(\".toggle-container\").append(`\n\t\t\t\t<div class=\"form-group mb-0\" id=\"toggle-view\">\n\t\t\t\t\t<button id=\"${ icon }\" class=\"btn ${ view } mr-2\">\n\t\t\t\t\t\t<span>\n\t\t\t\t\t\t\t<svg class=\"icon icon-md\">\n\t\t\t\t\t\t\t\t<use href=\"#icon-${ icon }\"></use>\n\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t</span>\n\t\t\t\t\t</button>\n\t\t\t\t</div>\n\t\t\t`);\n\t\t});\n\t}\n\n\tbind_view_toggler_actions() {\n\t\t$(\"#list\").click(function() {\n\t\t\tlet $btn = $(this);\n\t\t\t$btn.removeClass('btn-primary');\n\t\t\t$btn.addClass('btn-primary');\n\t\t\t$(\".btn-grid-view\").removeClass('btn-primary');\n\n\t\t\t$(\"#products-grid-area\").addClass(\"hidden\");\n\t\t\t$(\"#products-list-area\").removeClass(\"hidden\");\n\t\t\tlocalStorage.setItem(\"product_view\", \"List View\");\n\t\t});\n\n\t\t$(\"#image-view\").click(function() {\n\t\t\tlet $btn = $(this);\n\t\t\t$btn.removeClass('btn-primary');\n\t\t\t$btn.addClass('btn-primary');\n\t\t\t$(\".btn-list-view\").removeClass('btn-primary');\n\n\t\t\t$(\"#products-list-area\").addClass(\"hidden\");\n\t\t\t$(\"#products-grid-area\").removeClass(\"hidden\");\n\t\t\tlocalStorage.setItem(\"product_view\", \"Grid View\");\n\t\t});\n\t}\n\n\tset_view_state() {\n\t\tif (this.preference === \"List View\") {\n\t\t\t$(\"#list\").addClass('btn-primary');\n\t\t\t$(\"#image-view\").removeClass('btn-primary');\n\t\t} else {\n\t\t\t$(\"#image-view\").addClass('btn-primary');\n\t\t\t$(\"#list\").removeClass('btn-primary');\n\t\t}\n\t}\n\n\tbind_paging_action() {\n\t\tlet me = this;\n\t\t$('.btn-prev, .btn-next').click((e) => {\n\t\t\tconst $btn = $(e.target);\n\t\t\tme.from_filters = false;\n\n\t\t\t$btn.prop('disabled', true);\n\t\t\tconst start = $btn.data('start');\n\n\t\t\tlet query_params = frappe.utils.get_query_params();\n\t\t\tquery_params.start = start;\n\t\t\tlet path = window.location.pathname + '?' + frappe.utils.get_url_from_dict(query_params);\n\t\t\twindow.location.href = path;\n\t\t});\n\t}\n\n\tre_render_discount_filters(filter_data) {\n\t\tthis.get_discount_filter_html(filter_data);\n\t\tif (this.from_filters) {\n\t\t\t// Bind filter action if triggered via filters\n\t\t\t// if not from filter action, page load will bind actions\n\t\t\tthis.bind_discount_filter_action();\n\t\t}\n\t\t// discount filters are rendered with Items (later)\n\t\t// unlike the other filters\n\t\tthis.restore_discount_filter();\n\t}\n\n\tget_discount_filter_html(filter_data) {\n\t\t$(\"#discount-filters\").remove();\n\t\tif (filter_data) {\n\t\t\t$(\"#product-filters\").append(`\n\t\t\t\t<div id=\"discount-filters\" class=\"mb-4 filter-block pb-5\">\n\t\t\t\t\t<div class=\"filter-label mb-3\">${ __(\"Discounts\") }</div>\n\t\t\t\t</div>\n\t\t\t`);\n\n\t\t\tlet html = `<div class=\"filter-options\">`;\n\t\t\tfilter_data.forEach(filter => {\n\t\t\t\thtml += `\n\t\t\t\t\t<div class=\"checkbox\">\n\t\t\t\t\t\t<label data-value=\"${ filter[0] }\">\n\t\t\t\t\t\t\t<input type=\"radio\"\n\t\t\t\t\t\t\t\tclass=\"product-filter discount-filter\"\n\t\t\t\t\t\t\t\tname=\"discount\" id=\"${ filter[0] }\"\n\t\t\t\t\t\t\t\tdata-filter-name=\"discount\"\n\t\t\t\t\t\t\t\tdata-filter-value=\"${ filter[0] }\"\n\t\t\t\t\t\t\t\tstyle=\"width: 14px !important\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<span class=\"label-area\" for=\"${ filter[0] }\">\n\t\t\t\t\t\t\t\t\t${ filter[1] }\n\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t</label>\n\t\t\t\t\t</div>\n\t\t\t\t`;\n\t\t\t});\n\t\t\thtml += `</div>`;\n\n\t\t\t$(\"#discount-filters\").append(html);\n\t\t}\n\t}\n\n\trestore_discount_filter() {\n\t\tconst filters = frappe.utils.get_query_params();\n\t\tlet field_filters = filters.field_filters;\n\t\tif (!field_filters) return;\n\n\t\tfield_filters = JSON.parse(field_filters);\n\n\t\tif (field_filters && field_filters[\"discount\"]) {\n\t\t\tconst values = field_filters[\"discount\"];\n\t\t\tconst selector = values.map(value => {\n\t\t\t\treturn `input[data-filter-name=\"discount\"][data-filter-value=\"${value}\"]`;\n\t\t\t}).join(',');\n\t\t\t$(selector).prop('checked', true);\n\t\t\tthis.field_filters = field_filters;\n\t\t}\n\t}\n\n\tbind_discount_filter_action() {\n\t\tlet me = this;\n\t\t$('.discount-filter').on('change', (e) => {\n\t\t\tconst $checkbox = $(e.target);\n\t\t\tconst is_checked = $checkbox.is(':checked');\n\n\t\t\tconst {\n\t\t\t\tfilterValue: filter_value\n\t\t\t} = $checkbox.data();\n\n\t\t\tdelete this.field_filters[\"discount\"];\n\n\t\t\tif (is_checked) {\n\t\t\t\tthis.field_filters[\"discount\"] = [];\n\t\t\t\tthis.field_filters[\"discount\"].push(filter_value);\n\t\t\t}\n\n\t\t\tif (this.field_filters[\"discount\"].length === 0) {\n\t\t\t\tdelete this.field_filters[\"discount\"];\n\t\t\t}\n\n\t\t\tme.change_route_with_filters();\n\t\t});\n\t}\n\n\tbind_filters() {\n\t\tlet me = this;\n\t\tthis.field_filters = {};\n\t\tthis.attribute_filters = {};\n\n\t\t$('.product-filter').on('change', (e) => {\n\t\t\tme.from_filters = true;\n\n\t\t\tconst $checkbox = $(e.target);\n\t\t\tconst is_checked = $checkbox.is(':checked');\n\n\t\t\tif ($checkbox.is('.attribute-filter')) {\n\t\t\t\tconst {\n\t\t\t\t\tattributeName: attribute_name,\n\t\t\t\t\tattributeValue: attribute_value\n\t\t\t\t} = $checkbox.data();\n\n\t\t\t\tif (is_checked) {\n\t\t\t\t\tthis.attribute_filters[attribute_name] = this.attribute_filters[attribute_name] || [];\n\t\t\t\t\tthis.attribute_filters[attribute_name].push(attribute_value);\n\t\t\t\t} else {\n\t\t\t\t\tthis.attribute_filters[attribute_name] = this.attribute_filters[attribute_name] || [];\n\t\t\t\t\tthis.attribute_filters[attribute_name] = this.attribute_filters[attribute_name].filter(v => v !== attribute_value);\n\t\t\t\t}\n\n\t\t\t\tif (this.attribute_filters[attribute_name].length === 0) {\n\t\t\t\t\tdelete this.attribute_filters[attribute_name];\n\t\t\t\t}\n\t\t\t} else if ($checkbox.is('.field-filter') || $checkbox.is('.discount-filter')) {\n\t\t\t\tconst {\n\t\t\t\t\tfilterName: filter_name,\n\t\t\t\t\tfilterValue: filter_value\n\t\t\t\t} = $checkbox.data();\n\n\t\t\t\tif ($checkbox.is('.discount-filter')) {\n\t\t\t\t\t// clear previous discount filter to accomodate new\n\t\t\t\t\tdelete this.field_filters[\"discount\"];\n\t\t\t\t}\n\t\t\t\tif (is_checked) {\n\t\t\t\t\tthis.field_filters[filter_name] = this.field_filters[filter_name] || [];\n\t\t\t\t\tif (!in_list(this.field_filters[filter_name], filter_value)) {\n\t\t\t\t\t\tthis.field_filters[filter_name].push(filter_value);\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tthis.field_filters[filter_name] = this.field_filters[filter_name] || [];\n\t\t\t\t\tthis.field_filters[filter_name] = this.field_filters[filter_name].filter(v => v !== filter_value);\n\t\t\t\t}\n\n\t\t\t\tif (this.field_filters[filter_name].length === 0) {\n\t\t\t\t\tdelete this.field_filters[filter_name];\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tme.change_route_with_filters();\n\t\t});\n\t}\n\n\tchange_route_with_filters() {\n\t\tlet route_params = frappe.utils.get_query_params();\n\n\t\tlet start = this.if_key_exists(route_params.start) || 0;\n\t\tif (this.from_filters) {\n\t\t\tstart = 0; // show items from first page if new filters are triggered\n\t\t}\n\n\t\tconst query_string = this.get_query_string({\n\t\t\tstart: start,\n\t\t\tfield_filters: JSON.stringify(this.if_key_exists(this.field_filters)),\n\t\t\tattribute_filters: JSON.stringify(this.if_key_exists(this.attribute_filters)),\n\t\t});\n\t\twindow.history.pushState('filters', '', `${location.pathname}?` + query_string);\n\n\t\t$('.page_content input').prop('disabled', true);\n\n\t\tthis.make(true);\n\t\t$('.page_content input').prop('disabled', false);\n\t}\n\n\trestore_filters_state() {\n\t\tconst filters = frappe.utils.get_query_params();\n\t\tlet {field_filters, attribute_filters} = filters;\n\n\t\tif (field_filters) {\n\t\t\tfield_filters = JSON.parse(field_filters);\n\t\t\tfor (let fieldname in field_filters) {\n\t\t\t\tconst values = field_filters[fieldname];\n\t\t\t\tconst selector = values.map(value => {\n\t\t\t\t\treturn `input[data-filter-name=\"${fieldname}\"][data-filter-value=\"${value}\"]`;\n\t\t\t\t}).join(',');\n\t\t\t\t$(selector).prop('checked', true);\n\t\t\t}\n\t\t\tthis.field_filters = field_filters;\n\t\t}\n\t\tif (attribute_filters) {\n\t\t\tattribute_filters = JSON.parse(attribute_filters);\n\t\t\tfor (let attribute in attribute_filters) {\n\t\t\t\tconst values = attribute_filters[attribute];\n\t\t\t\tconst selector = values.map(value => {\n\t\t\t\t\treturn `input[data-attribute-name=\"${attribute}\"][data-attribute-value=\"${value}\"]`;\n\t\t\t\t}).join(',');\n\t\t\t\t$(selector).prop('checked', true);\n\t\t\t}\n\t\t\tthis.attribute_filters = attribute_filters;\n\t\t}\n\t}\n\n\trender_no_products_section(error=false) {\n\t\tlet error_section = `\n\t\t\t<div class=\"mt-4 w-100 alert alert-error font-md\">\n\t\t\t\tSomething went wrong. Please refresh or contact us.\n\t\t\t</div>\n\t\t`;\n\t\tlet no_results_section = `\n\t\t\t<div class=\"cart-empty frappe-card mt-4\">\n\t\t\t\t<div class=\"cart-empty-state\">\n\t\t\t\t\t<img src=\"/assets/erpnext/images/ui-states/cart-empty-state.png\" alt=\"Empty Cart\">\n\t\t\t\t</div>\n\t\t\t\t<div class=\"cart-empty-message mt-4\">${ __('No products found') }</p>\n\t\t\t</div>\n\t\t`;\n\n\t\tthis.products_section.append(error ? error_section : no_results_section);\n\t}\n\n\trender_item_sub_categories(categories) {\n\t\tif (categories && categories.length) {\n\t\t\tlet sub_group_html = `\n\t\t\t\t<div class=\"sub-category-container scroll-categories\">\n\t\t\t`;\n\n\t\t\tcategories.forEach(category => {\n\t\t\t\tsub_group_html += `\n\t\t\t\t\t<a href=\"${ category.route || '#' }\" style=\"text-decoration: none;\">\n\t\t\t\t\t\t<div class=\"category-pill\">\n\t\t\t\t\t\t\t${ category.name }\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</a>\n\t\t\t\t`;\n\t\t\t});\n\t\t\tsub_group_html += `</div>`;\n\n\t\t\t$(\"#product-listing\").prepend(sub_group_html);\n\t\t}\n\t}\n\n\tget_query_string(object) {\n\t\tconst url = new URLSearchParams();\n\t\tfor (let key in object) {\n\t\t\tconst value = object[key];\n\t\t\tif (value) {\n\t\t\t\turl.append(key, value);\n\t\t\t}\n\t\t}\n\t\treturn url.toString();\n\t}\n\n\tif_key_exists(obj) {\n\t\tlet exists = false;\n\t\tfor (let key in obj) {\n\t\t\tif (Object.prototype.hasOwnProperty.call(obj, key) && obj[key]) {\n\t\t\t\texists = true;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t\treturn exists ? obj : undefined;\n\t}\n};","erpnext.ProductGrid = class {\n\t/* Options:\n\t\t- items: Items\n\t\t- settings: E Commerce Settings\n\t\t- products_section: Products Wrapper\n\t\t- preference: If preference is not grid view, render but hide\n\t*/\n\tconstructor(options) {\n\t\tObject.assign(this, options);\n\n\t\tif (this.preference !== \"Grid View\") {\n\t\t\tthis.products_section.addClass(\"hidden\");\n\t\t}\n\n\t\tthis.products_section.empty();\n\t\tthis.make();\n\t}\n\n\tmake() {\n\t\tlet me = this;\n\t\tlet html = ``;\n\n\t\tthis.items.forEach(item => {\n\t\t\tlet title = item.web_item_name || item.item_name || item.item_code || \"\";\n\t\t\ttitle =  title.length > 90 ? title.substr(0, 90) + \"...\" : title;\n\n\t\t\thtml += `<div class=\"col-sm-4 item-card\"><div class=\"card text-left\">`;\n\t\t\thtml += me.get_image_html(item, title);\n\t\t\thtml += me.get_card_body_html(item, title, me.settings);\n\t\t\thtml += `</div></div>`;\n\t\t});\n\n\t\tlet $product_wrapper = this.products_section;\n\t\t$product_wrapper.append(html);\n\t}\n\n\tget_image_html(item, title) {\n\t\tlet image = item.website_image || item.image;\n\n\t\tif (image) {\n\t\t\treturn `\n\t\t\t\t<div class=\"card-img-container\">\n\t\t\t\t\t<a href=\"/${ item.route || '#' }\" style=\"text-decoration: none;\">\n\t\t\t\t\t\t<img class=\"card-img\" src=\"${ image }\" alt=\"${ title }\">\n\t\t\t\t\t</a>\n\t\t\t\t</div>\n\t\t\t`;\n\t\t} else {\n\t\t\treturn `\n\t\t\t\t<div class=\"card-img-container\">\n\t\t\t\t\t<a href=\"/${ item.route || '#' }\" style=\"text-decoration: none;\">\n\t\t\t\t\t\t<div class=\"card-img-top no-image\">\n\t\t\t\t\t\t\t${ frappe.get_abbr(title) }\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</a>\n\t\t\t\t</div>\n\t\t\t`;\n\t\t}\n\t}\n\n\tget_card_body_html(item, title, settings) {\n\t\tlet body_html = `\n\t\t\t<div class=\"card-body text-left card-body-flex\" style=\"width:100%\">\n\t\t\t\t<div style=\"margin-top: 1rem; display: flex;\">\n\t\t`;\n\t\tbody_html += this.get_title(item, title);\n\n\t\t// get floating elements\n\t\tif (!item.has_variants) {\n\t\t\tif (settings.enable_wishlist) {\n\t\t\t\tbody_html += this.get_wishlist_icon(item);\n\t\t\t}\n\t\t\tif (settings.enabled) {\n\t\t\t\tbody_html += this.get_cart_indicator(item);\n\t\t\t}\n\n\t\t}\n\n\t\tbody_html += `</div>`;\n\t\tbody_html += `<div class=\"product-category\">${ item.item_group || '' }</div>`;\n\n\t\tif (item.formatted_price) {\n\t\t\tbody_html += this.get_price_html(item);\n\t\t}\n\n\t\tbody_html += this.get_stock_availability(item, settings);\n\t\tbody_html += this.get_primary_button(item, settings);\n\t\tbody_html += `</div>`; // close div on line 49\n\n\t\treturn body_html;\n\t}\n\n\tget_title(item, title) {\n\t\tlet title_html = `\n\t\t\t<a href=\"/${ item.route || '#' }\">\n\t\t\t\t<div class=\"product-title\">\n\t\t\t\t\t${ title || '' }\n\t\t\t\t</div>\n\t\t\t</a>\n\t\t`;\n\t\treturn title_html;\n\t}\n\n\tget_wishlist_icon(item) {\n\t\tlet icon_class = item.wished ? \"wished\" : \"not-wished\";\n\t\treturn `\n\t\t\t<div class=\"like-action ${ item.wished ? \"like-action-wished\" : ''}\"\n\t\t\t\tdata-item-code=\"${ item.item_code }\">\n\t\t\t\t<svg class=\"icon sm\">\n\t\t\t\t\t<use class=\"${ icon_class } wish-icon\" href=\"#icon-heart\"></use>\n\t\t\t\t</svg>\n\t\t\t</div>\n\t\t`;\n\t}\n\n\tget_cart_indicator(item) {\n\t\treturn `\n\t\t\t<div class=\"cart-indicator ${item.in_cart ? '' : 'hidden'}\" data-item-code=\"${ item.item_code }\">\n\t\t\t\t1\n\t\t\t</div>\n\t\t`;\n\t}\n\n\tget_price_html(item) {\n\t\tlet price_html = `\n\t\t\t<div class=\"product-price\">\n\t\t\t\t${ item.formatted_price || '' }\n\t\t`;\n\n\t\tif (item.formatted_mrp) {\n\t\t\tprice_html += `\n\t\t\t\t<small class=\"striked-price\">\n\t\t\t\t\t<s>${ item.formatted_mrp ? item.formatted_mrp.replace(/ +/g, \"\") : \"\" }</s>\n\t\t\t\t</small>\n\t\t\t\t<small class=\"ml-1 product-info-green\">\n\t\t\t\t\t${ item.discount } OFF\n\t\t\t\t</small>\n\t\t\t`;\n\t\t}\n\t\tprice_html += `</div>`;\n\t\treturn price_html;\n\t}\n\n\tget_stock_availability(item, settings) {\n\t\tif (settings.show_stock_availability && !item.has_variants) {\n\t\t\tif (item.on_backorder) {\n\t\t\t\treturn `\n\t\t\t\t\t<span class=\"out-of-stock mb-2 mt-1\" style=\"color: var(--primary-color)\">\n\t\t\t\t\t\t${ __(\"Available on backorder\") }\n\t\t\t\t\t</span>\n\t\t\t\t`;\n\t\t\t} else if (!item.in_stock) {\n\t\t\t\treturn `\n\t\t\t\t\t<span class=\"out-of-stock mb-2 mt-1\">\n\t\t\t\t\t\t${ __(\"Out of stock\") }\n\t\t\t\t\t</span>\n\t\t\t\t`;\n\t\t\t}\n\t\t}\n\n\t\treturn ``;\n\t}\n\n\tget_primary_button(item, settings) {\n\t\tif (item.has_variants) {\n\t\t\treturn `\n\t\t\t\t<a href=\"/${ item.route || '#' }\">\n\t\t\t\t\t<div class=\"btn btn-sm btn-explore-variants w-100 mt-4\">\n\t\t\t\t\t\t${ __('Explore') }\n\t\t\t\t\t</div>\n\t\t\t\t</a>\n\t\t\t`;\n\t\t} else if (settings.enabled && (settings.allow_items_not_in_stock || item.in_stock)) {\n\t\t\treturn `\n\t\t\t\t<div id=\"${ item.name }\" class=\"btn\n\t\t\t\t\tbtn-sm btn-primary btn-add-to-cart-list\n\t\t\t\t\tw-100 mt-2 ${ item.in_cart ? 'hidden' : '' }\"\n\t\t\t\t\tdata-item-code=\"${ item.item_code }\">\n\t\t\t\t\t<span class=\"mr-2\">\n\t\t\t\t\t\t<svg class=\"icon icon-md\">\n\t\t\t\t\t\t\t<use href=\"#icon-assets\"></use>\n\t\t\t\t\t\t</svg>\n\t\t\t\t\t</span>\n\t\t\t\t\t${ settings.enable_checkout ? __('Add to Cart') :  __('Add to Quote') }\n\t\t\t\t</div>\n\n\t\t\t\t<a href=\"/cart\">\n\t\t\t\t\t<div id=\"${ item.name }\" class=\"btn\n\t\t\t\t\t\tbtn-sm btn-primary btn-add-to-cart-list\n\t\t\t\t\t\tw-100 mt-4 go-to-cart-grid\n\t\t\t\t\t\t${ item.in_cart ? '' : 'hidden' }\"\n\t\t\t\t\t\tdata-item-code=\"${ item.item_code }\">\n\t\t\t\t\t\t${ settings.enable_checkout ? __('Go to Cart') :  __('Go to Quote') }\n\t\t\t\t\t</div>\n\t\t\t\t</a>\n\t\t\t`;\n\t\t} else {\n\t\t\treturn ``;\n\t\t}\n\t}\n};","erpnext.ProductList = class {\n\t/* Options:\n\t\t- items: Items\n\t\t- settings: E Commerce Settings\n\t\t- products_section: Products Wrapper\n\t\t- preference: If preference is not list view, render but hide\n\t*/\n\tconstructor(options) {\n\t\tObject.assign(this, options);\n\n\t\tif (this.preference !== \"List View\") {\n\t\t\tthis.products_section.addClass(\"hidden\");\n\t\t}\n\n\t\tthis.products_section.empty();\n\t\tthis.make();\n\t}\n\n\tmake() {\n\t\tlet me = this;\n\t\tlet html = `<br><br>`;\n\n\t\tthis.items.forEach(item => {\n\t\t\tlet title = item.web_item_name || item.item_name || item.item_code || \"\";\n\t\t\ttitle =  title.length > 200 ? title.substr(0, 200) + \"...\" : title;\n\n\t\t\thtml += `<div class='row list-row w-100 mb-4'>`;\n\t\t\thtml += me.get_image_html(item, title, me.settings);\n\t\t\thtml += me.get_row_body_html(item, title, me.settings);\n\t\t\thtml += `</div>`;\n\t\t});\n\n\t\tlet $product_wrapper = this.products_section;\n\t\t$product_wrapper.append(html);\n\t}\n\n\tget_image_html(item, title, settings) {\n\t\tlet image = item.website_image || item.image;\n\t\tlet wishlist_enabled = !item.has_variants && settings.enable_wishlist;\n\t\tlet image_html = ``;\n\n\t\tif (image) {\n\t\t\timage_html += `\n\t\t\t\t<div class=\"col-2 border text-center rounded list-image\">\n\t\t\t\t\t<a class=\"product-link product-list-link\" href=\"/${ item.route || '#' }\">\n\t\t\t\t\t\t<img itemprop=\"image\" class=\"website-image h-100 w-100\" alt=\"${ title }\"\n\t\t\t\t\t\t\tsrc=\"${ image }\">\n\t\t\t\t\t</a>\n\t\t\t\t\t${ wishlist_enabled ? this.get_wishlist_icon(item): '' }\n\t\t\t\t</div>\n\t\t\t`;\n\t\t} else {\n\t\t\timage_html += `\n\t\t\t\t<div class=\"col-2 border text-center rounded list-image\">\n\t\t\t\t\t<a class=\"product-link product-list-link\" href=\"/${ item.route || '#' }\"\n\t\t\t\t\t\tstyle=\"text-decoration: none\">\n\t\t\t\t\t\t<div class=\"card-img-top no-image-list\">\n\t\t\t\t\t\t\t${ frappe.get_abbr(title) }\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</a>\n\t\t\t\t\t${ wishlist_enabled ? this.get_wishlist_icon(item): '' }\n\t\t\t\t</div>\n\t\t\t`;\n\t\t}\n\n\t\treturn image_html;\n\t}\n\n\tget_row_body_html(item, title, settings) {\n\t\tlet body_html = `<div class='col-10 text-left'>`;\n\t\tbody_html += this.get_title_html(item, title, settings);\n\t\tbody_html += this.get_item_details(item, settings);\n\t\tbody_html += `</div>`;\n\t\treturn body_html;\n\t}\n\n\tget_title_html(item, title, settings) {\n\t\tlet title_html = `<div style=\"display: flex; margin-left: -15px;\">`;\n\t\ttitle_html += `\n\t\t\t<div class=\"col-8\" style=\"margin-right: -15px;\">\n\t\t\t\t<a class=\"\" href=\"/${ item.route || '#' }\"\n\t\t\t\t\tstyle=\"color: var(--gray-800); font-weight: 500;\">\n\t\t\t\t\t${ title }\n\t\t\t\t</a>\n\t\t\t</div>\n\t\t`;\n\n\t\tif (settings.enabled) {\n\t\t\ttitle_html += `<div class=\"col-4 cart-action-container ${item.in_cart ? 'd-flex' : ''}\">`;\n\t\t\ttitle_html += this.get_primary_button(item, settings);\n\t\t\ttitle_html += `</div>`;\n\t\t}\n\t\ttitle_html += `</div>`;\n\n\t\treturn title_html;\n\t}\n\n\tget_item_details(item, settings) {\n\t\tlet details = `\n\t\t\t<p class=\"product-code\">\n\t\t\t\t${ item.item_group } | Item Code : ${ item.item_code }\n\t\t\t</p>\n\t\t\t<div class=\"mt-2\" style=\"color: var(--gray-600) !important; font-size: 13px;\">\n\t\t\t\t${ item.short_description || '' }\n\t\t\t</div>\n\t\t\t<div class=\"product-price\">\n\t\t\t\t${ item.formatted_price || '' }\n\t\t`;\n\n\t\tif (item.formatted_mrp) {\n\t\t\tdetails += `\n\t\t\t\t<small class=\"striked-price\">\n\t\t\t\t\t<s>${ item.formatted_mrp ? item.formatted_mrp.replace(/ +/g, \"\") : \"\" }</s>\n\t\t\t\t</small>\n\t\t\t\t<small class=\"ml-1 product-info-green\">\n\t\t\t\t\t${ item.discount } OFF\n\t\t\t\t</small>\n\t\t\t`;\n\t\t}\n\n\t\tdetails += this.get_stock_availability(item, settings);\n\t\tdetails += `</div>`;\n\n\t\treturn details;\n\t}\n\n\tget_stock_availability(item, settings) {\n\t\tif (settings.show_stock_availability && !item.has_variants) {\n\t\t\tif (item.on_backorder) {\n\t\t\t\treturn `\n\t\t\t\t\t<br>\n\t\t\t\t\t<span class=\"out-of-stock mt-2\" style=\"color: var(--primary-color)\">\n\t\t\t\t\t\t${ __(\"Available on backorder\") }\n\t\t\t\t\t</span>\n\t\t\t\t`;\n\t\t\t} else if (!item.in_stock) {\n\t\t\t\treturn `\n\t\t\t\t\t<br>\n\t\t\t\t\t<span class=\"out-of-stock mt-2\">${ __(\"Out of stock\") }</span>\n\t\t\t\t`;\n\t\t\t}\n\t\t}\n\t\treturn ``;\n\t}\n\n\tget_wishlist_icon(item) {\n\t\tlet icon_class = item.wished ? \"wished\" : \"not-wished\";\n\n\t\treturn `\n\t\t\t<div class=\"like-action-list ${ item.wished ? \"like-action-wished\" : ''}\"\n\t\t\t\tdata-item-code=\"${ item.item_code }\">\n\t\t\t\t<svg class=\"icon sm\">\n\t\t\t\t\t<use class=\"${ icon_class } wish-icon\" href=\"#icon-heart\"></use>\n\t\t\t\t</svg>\n\t\t\t</div>\n\t\t`;\n\t}\n\n\tget_primary_button(item, settings) {\n\t\tif (item.has_variants) {\n\t\t\treturn `\n\t\t\t\t<a href=\"/${ item.route || '#' }\">\n\t\t\t\t\t<div class=\"btn btn-sm btn-explore-variants btn mb-0 mt-0\">\n\t\t\t\t\t\t${ __('Explore') }\n\t\t\t\t\t</div>\n\t\t\t\t</a>\n\t\t\t`;\n\t\t} else if (settings.enabled && (settings.allow_items_not_in_stock || item.in_stock)) {\n\t\t\treturn `\n\t\t\t\t<div id=\"${ item.name }\" class=\"btn\n\t\t\t\t\tbtn-sm btn-primary btn-add-to-cart-list mb-0\n\t\t\t\t\t${ item.in_cart ? 'hidden' : '' }\"\n\t\t\t\t\tdata-item-code=\"${ item.item_code }\"\n\t\t\t\t\tstyle=\"margin-top: 0px !important; max-height: 30px; float: right;\n\t\t\t\t\t\tpadding: 0.25rem 1rem; min-width: 135px;\">\n\t\t\t\t\t<span class=\"mr-2\">\n\t\t\t\t\t\t<svg class=\"icon icon-md\">\n\t\t\t\t\t\t\t<use href=\"#icon-assets\"></use>\n\t\t\t\t\t\t</svg>\n\t\t\t\t\t</span>\n\t\t\t\t\t${ settings.enable_checkout ? __('Add to Cart') :  __('Add to Quote') }\n\t\t\t\t</div>\n\n\t\t\t\t<div class=\"cart-indicator list-indicator ${item.in_cart ? '' : 'hidden'}\">\n\t\t\t\t\t1\n\t\t\t\t</div>\n\n\t\t\t\t<a href=\"/cart\">\n\t\t\t\t\t<div id=\"${ item.name }\" class=\"btn\n\t\t\t\t\t\tbtn-sm btn-primary btn-add-to-cart-list\n\t\t\t\t\t\tml-4 go-to-cart mb-0 mt-0\n\t\t\t\t\t\t${ item.in_cart ? '' : 'hidden' }\"\n\t\t\t\t\t\tdata-item-code=\"${ item.item_code }\"\n\t\t\t\t\t\tstyle=\"padding: 0.25rem 1rem; min-width: 135px;\">\n\t\t\t\t\t\t${ settings.enable_checkout ? __('Go to Cart') :  __('Go to Quote') }\n\t\t\t\t\t</div>\n\t\t\t\t</a>\n\t\t\t`;\n\t\t} else {\n\t\t\treturn ``;\n\t\t}\n\t}\n\n};","erpnext.ProductSearch = class {\n\tconstructor() {\n\t\tthis.MAX_RECENT_SEARCHES = 4;\n\t\tthis.searchBox = $(\"#search-box\");\n\n\t\tthis.setupSearchDropDown();\n\t\tthis.bindSearchAction();\n\t}\n\n\tsetupSearchDropDown() {\n\t\tthis.search_area = $(\"#dropdownMenuSearch\");\n\t\tthis.setupSearchResultContainer();\n\t\tthis.populateRecentSearches();\n\t}\n\n\tbindSearchAction() {\n\t\tlet me = this;\n\n\t\t// Show Search dropdown\n\t\tthis.searchBox.on(\"focus\", () => {\n\t\t\tthis.search_dropdown.removeClass(\"hidden\");\n\t\t});\n\n\t\t// If click occurs outside search input/results, hide results.\n\t\t// Click can happen anywhere on the page\n\t\t$(\"body\").on(\"click\", (e) => {\n\t\t\tlet searchEvent = $(e.target).closest('#search-box').length;\n\t\t\tlet resultsEvent = $(e.target).closest('#search-results-container').length;\n\t\t\tlet isResultHidden = this.search_dropdown.hasClass(\"hidden\");\n\n\t\t\tif (!searchEvent && !resultsEvent && !isResultHidden) {\n\t\t\t\tthis.search_dropdown.addClass(\"hidden\");\n\t\t\t}\n\t\t});\n\n\t\t// Process search input\n\t\tthis.searchBox.on(\"input\", (e) => {\n\t\t\tlet query = e.target.value;\n\n\t\t\tif (query.length == 0) {\n\t\t\t\tme.populateResults(null);\n\t\t\t\tme.populateCategoriesList(null);\n\t\t\t}\n\n\t\t\tif (query.length < 3 || !query.length) return;\n\n\t\t\tfrappe.call({\n\t\t\t\tmethod: \"erpnext.templates.pages.product_search.search\",\n\t\t\t\targs: {\n\t\t\t\t\tquery: query\n\t\t\t\t},\n\t\t\t\tcallback: (data) => {\n\t\t\t\t\tlet product_results = null, category_results = null;\n\n\t\t\t\t\t// Populate product results\n\t\t\t\t\tproduct_results = data.message ? data.message.product_results : null;\n\t\t\t\t\tme.populateResults(product_results);\n\n\t\t\t\t\t// Populate categories\n\t\t\t\t\tif (me.category_container) {\n\t\t\t\t\t\tcategory_results = data.message ? data.message.category_results : null;\n\t\t\t\t\t\tme.populateCategoriesList(category_results);\n\t\t\t\t\t}\n\n\t\t\t\t\t// Populate recent search chips only on successful queries\n\t\t\t\t\tif (!$.isEmptyObject(product_results) || !$.isEmptyObject(category_results)) {\n\t\t\t\t\t\tme.setRecentSearches(query);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tthis.search_dropdown.removeClass(\"hidden\");\n\t\t});\n\t}\n\n\tsetupSearchResultContainer() {\n\t\tthis.search_dropdown = this.search_area.append(`\n\t\t\t<div class=\"overflow-hidden shadow dropdown-menu w-100 hidden\"\n\t\t\t\tid=\"search-results-container\"\n\t\t\t\taria-labelledby=\"dropdownMenuSearch\"\n\t\t\t\tstyle=\"display: flex; flex-direction: column;\">\n\t\t\t</div>\n\t\t`).find(\"#search-results-container\");\n\n\t\tthis.setupCategoryContainer();\n\t\tthis.setupProductsContainer();\n\t\tthis.setupRecentsContainer();\n\t}\n\n\tsetupProductsContainer() {\n\t\tthis.products_container = this.search_dropdown.append(`\n\t\t\t<div id=\"product-results mt-2\">\n\t\t\t\t<div id=\"product-scroll\" style=\"overflow: scroll; max-height: 300px\">\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t`).find(\"#product-scroll\");\n\t}\n\n\tsetupCategoryContainer() {\n\t\tthis.category_container = this.search_dropdown.append(`\n\t\t\t<div class=\"category-container mt-2 mb-1\">\n\t\t\t\t<div class=\"category-chips\">\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t`).find(\".category-chips\");\n\t}\n\n\tsetupRecentsContainer() {\n\t\tlet $recents_section = this.search_dropdown.append(`\n\t\t\t<div class=\"mb-2 mt-2 recent-searches\">\n\t\t\t\t<div>\n\t\t\t\t\t<b>${ __(\"Recent\") }</b>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t`).find(\".recent-searches\");\n\n\t\tthis.recents_container = $recents_section.append(`\n\t\t\t<div id=\"recents\" style=\"padding: .25rem 0 1rem 0;\">\n\t\t\t</div>\n\t\t`).find(\"#recents\");\n\t}\n\n\tgetRecentSearches() {\n\t\treturn JSON.parse(localStorage.getItem(\"recent_searches\") || \"[]\");\n\t}\n\n\tattachEventListenersToChips() {\n\t\tlet me  = this;\n\t\tconst chips = $(\".recent-search\");\n\t\twindow.chips = chips;\n\n\t\tfor (let chip of chips) {\n\t\t\tchip.addEventListener(\"click\", () => {\n\t\t\t\tme.searchBox[0].value = chip.innerText.trim();\n\n\t\t\t\t// Start search with `recent query`\n\t\t\t\tme.searchBox.trigger(\"input\");\n\t\t\t\tme.searchBox.focus();\n\t\t\t});\n\t\t}\n\t}\n\n\tsetRecentSearches(query) {\n\t\tlet recents = this.getRecentSearches();\n\t\tif (recents.length >= this.MAX_RECENT_SEARCHES) {\n\t\t\t// Remove the `first` query\n\t\t\trecents.splice(0, 1);\n\t\t}\n\n\t\tif (recents.indexOf(query) >= 0) {\n\t\t\treturn;\n\t\t}\n\n\t\trecents.push(query);\n\t\tlocalStorage.setItem(\"recent_searches\", JSON.stringify(recents));\n\n\t\tthis.populateRecentSearches();\n\t}\n\n\tpopulateRecentSearches() {\n\t\tlet recents = this.getRecentSearches();\n\n\t\tif (!recents.length) {\n\t\t\tthis.recents_container.html(`<span class=\"\"text-muted\">No searches yet.</span>`);\n\t\t\treturn;\n\t\t}\n\n\t\tlet html = \"\";\n\t\trecents.forEach((key) => {\n\t\t\thtml += `\n\t\t\t\t<div class=\"recent-search mr-1\" style=\"font-size: 13px\">\n\t\t\t\t\t<span class=\"mr-2\">\n\t\t\t\t\t\t<svg width=\"20\" height=\"20\" viewBox=\"0 0 16 16\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n\t\t\t\t\t\t\t<path d=\"M8 14C11.3137 14 14 11.3137 14 8C14 4.68629 11.3137 2 8 2C4.68629 2 2 4.68629 2 8C2 11.3137 4.68629 14 8 14Z\" stroke=\"var(--gray-500)\"\" stroke-miterlimit=\"10\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/>\n\t\t\t\t\t\t\t<path d=\"M8.00027 5.20947V8.00017L10 10\" stroke=\"var(--gray-500)\" stroke-miterlimit=\"10\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/>\n\t\t\t\t\t\t</svg>\n\t\t\t\t\t</span>\n\t\t\t\t\t${ key }\n\t\t\t\t</div>\n\t\t\t`;\n\t\t});\n\n\t\tthis.recents_container.html(html);\n\t\tthis.attachEventListenersToChips();\n\t}\n\n\tpopulateResults(product_results) {\n\t\tif (!product_results || product_results.length === 0) {\n\t\t\tlet empty_html = ``;\n\t\t\tthis.products_container.html(empty_html);\n\t\t\treturn;\n\t\t}\n\n\t\tlet html = \"\";\n\n\t\tproduct_results.forEach((res) => {\n\t\t\tlet thumbnail = res.thumbnail || '/assets/erpnext/images/ui-states/cart-empty-state.png';\n\t\t\thtml += `\n\t\t\t\t<div class=\"dropdown-item\" style=\"display: flex;\">\n\t\t\t\t\t<img class=\"item-thumb col-2\" src=${thumbnail} />\n\t\t\t\t\t<div class=\"col-9\" style=\"white-space: normal;\">\n\t\t\t\t\t\t<a href=\"/${res.route}\">${res.web_item_name}</a><br>\n\t\t\t\t\t\t<span class=\"brand-line\">${res.brand ? \"by \" + res.brand : \"\"}</span>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t`;\n\t\t});\n\n\t\tthis.products_container.html(html);\n\t}\n\n\tpopulateCategoriesList(category_results) {\n\t\tif (!category_results || category_results.length === 0) {\n\t\t\tlet empty_html = `\n\t\t\t\t<div class=\"category-container mt-2\">\n\t\t\t\t\t<div class=\"category-chips\">\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t`;\n\t\t\tthis.category_container.html(empty_html);\n\t\t\treturn;\n\t\t}\n\n\t\tlet html = `\n\t\t\t<div class=\"mb-2\">\n\t\t\t\t<b>${ __(\"Categories\") }</b>\n\t\t\t</div>\n\t\t`;\n\n\t\tcategory_results.forEach((category) => {\n\t\t\thtml += `\n\t\t\t\t<a href=\"/${category.route}\" class=\"btn btn-sm category-chip mr-2 mb-2\"\n\t\t\t\t\tstyle=\"font-size: 13px\" role=\"button\">\n\t\t\t\t${ category.name }\n\t\t\t\t</button>\n\t\t\t`;\n\t\t});\n\n\t\tthis.category_container.html(html);\n\t}\n};"],"names":["let","const","this","values","selector"],"mappings":"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"}